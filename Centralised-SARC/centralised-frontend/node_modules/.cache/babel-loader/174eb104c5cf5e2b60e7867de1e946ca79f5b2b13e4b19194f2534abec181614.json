{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport Swal from \"sweetalert2\";\nfunction useProfile() {\n  _s();\n  var _JSON$parse;\n  const [profileData, setProfileData] = useState({\n    name: \"\",\n    rollNo: \"\",\n    department: \"\",\n    degree: \"\",\n    hostel: \"\",\n    phone: \"\",\n    email: \"\",\n    ldap: \"\",\n    graduationYear: \"\",\n    gender: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const userData = localStorage.getItem(\"userData\");\n  const accessToken = (_JSON$parse = JSON.parse(userData)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.access;\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProfileData({\n      ...profileData,\n      [name]: value\n    });\n  };\n  const fetchProfileData = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/profile\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${accessToken}`\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch profile data\");\n      }\n      const data = await response.json();\n      setProfileData(data);\n      setLoading(false);\n    } catch (error) {\n      setError(error);\n      setLoading(false);\n    }\n  };\n  const updateProfileData = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/profile\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${accessToken}`\n        },\n        body: JSON.stringify(profileData)\n      });\n      const responseData = await response.json();\n      if (!response.ok) {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Error\",\n          text: responseData.error || \"Something went wrong\"\n        });\n      } else {\n        Swal.fire({\n          icon: \"success\",\n          title: \"Profile updated successfully\",\n          showConfirmButton: true\n        }).then(result => {\n          if (result.isConfirmed) {\n            fetchProfileData();\n          }\n        });\n      }\n    } catch (error) {\n      setError(error);\n    }\n  };\n  useEffect(() => {\n    fetchProfileData();\n  }, []);\n  return {\n    profileData,\n    loading,\n    error,\n    handleChange,\n    updateProfileData,\n    setProfileData\n  };\n}\n_s(useProfile, \"iFW6SpXyM9hcn/J5ZPxd2fCTirM=\");\nexport default useProfile;","map":{"version":3,"names":["useState","useEffect","Swal","useProfile","_s","_JSON$parse","profileData","setProfileData","name","rollNo","department","degree","hostel","phone","email","ldap","graduationYear","gender","loading","setLoading","error","setError","userData","localStorage","getItem","accessToken","JSON","parse","access","handleChange","e","value","target","fetchProfileData","response","fetch","method","headers","Authorization","ok","Error","data","json","updateProfileData","body","stringify","responseData","fire","icon","title","text","showConfirmButton","then","result","isConfirmed"],"sources":["C:/Users/Khushi Yadav/OneDrive/Desktop/SARC_ctm_assignment/Centralised-SARC/centralised-frontend/src/hooks/useProfile.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nfunction useProfile() {\r\n  const [profileData, setProfileData] = useState({\r\n    name: \"\",\r\n    rollNo: \"\",\r\n    department: \"\",\r\n    degree: \"\",\r\n    hostel: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    ldap: \"\",\r\n    graduationYear: \"\",\r\n    gender: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  const userData = localStorage.getItem(\"userData\");\r\n  const accessToken = JSON.parse(userData)?.access;\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setProfileData({\r\n      ...profileData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const fetchProfileData = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/profile\", {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to fetch profile data\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      setProfileData(data);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setError(error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateProfileData = async () => {\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/profile\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${accessToken}`,\r\n        },\r\n        body: JSON.stringify(profileData),\r\n      });\r\n\r\n      const responseData = await response.json();\r\n\r\n      if (!response.ok) {\r\n        Swal.fire({\r\n          icon: \"error\",\r\n          title: \"Error\",\r\n          text: responseData.error || \"Something went wrong\",\r\n        });\r\n      } else {\r\n        Swal.fire({\r\n          icon: \"success\",\r\n          title: \"Profile updated successfully\",\r\n          showConfirmButton: true,\r\n        }).then((result) => {\r\n          if (result.isConfirmed) {\r\n            fetchProfileData();\r\n          }\r\n        });\r\n      }\r\n    } catch (error) {\r\n      setError(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProfileData();\r\n  }, []);\r\n\r\n  return {\r\n    profileData,\r\n    loading,\r\n    error,\r\n    handleChange,\r\n    updateProfileData,\r\n    setProfileData,\r\n  };\r\n}\r\n\r\nexport default useProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}