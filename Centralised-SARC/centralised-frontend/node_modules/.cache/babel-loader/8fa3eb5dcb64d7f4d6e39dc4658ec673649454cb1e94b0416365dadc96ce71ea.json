{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport Swal from \"sweetalert2\";\nfunction useLogin() {\n  _s();\n  const [loginData, setLoginData] = useState({\n    name: \"\",\n    rollNo: \"\",\n    department: \"\",\n    degree: \"\",\n    hostel: \"\",\n    phone: \"\",\n    email: \"\",\n    ldap: \"\",\n    graduationYear: \"\",\n    gender: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setLoginData({\n      ...loginData,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(loginData)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.error || \"Login failed\");\n      }\n      localStorage.setItem(\"userData\", JSON.stringify(data));\n      Swal.fire({\n        icon: \"success\",\n        title: '<span style=\"color: black;\">Login Successful</span>',\n        showConfirmButton: true,\n        iconColor: \"green\",\n        background: `#fff`\n      });\n    } catch (error) {\n      setError(error.message);\n      Swal.fire({\n        icon: \"error\",\n        title: '<span style=\"color: black;\">Login Failed</span>',\n        html: `<span style=\"color: red;\">${error.message}</span>`,\n        iconColor: \"red\",\n        background: `#fff`\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    loginData,\n    loading,\n    error,\n    handleChange,\n    handleSubmit\n  };\n}\n_s(useLogin, \"YRyDUZhSm28u+OMLYXOGEHb7Bzo=\");\nexport default useLogin;","map":{"version":3,"names":["useState","Swal","useLogin","_s","loginData","setLoginData","name","rollNo","department","degree","hostel","phone","email","ldap","graduationYear","gender","loading","setLoading","error","setError","handleChange","e","value","target","handleSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","localStorage","setItem","fire","icon","title","showConfirmButton","iconColor","background","message","html"],"sources":["C:/Users/Khushi Yadav/OneDrive/Desktop/SARC_ctm_assignment/Centralised-SARC/centralised-frontend/src/hooks/useLogin.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nfunction useLogin() {\r\n  const [loginData, setLoginData] = useState({\r\n    name: \"\",\r\n    rollNo: \"\",\r\n    department: \"\",\r\n    degree: \"\",\r\n    hostel: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    ldap: \"\",\r\n    graduationYear: \"\",\r\n    gender: \"\",\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setLoginData({\r\n      ...loginData,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\"http://127.0.0.1:8000/api/authenticate/login\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(loginData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.error || \"Login failed\");\r\n      }\r\n\r\n      localStorage.setItem(\"userData\", JSON.stringify(data));\r\n\r\n      Swal.fire({\r\n        icon: \"success\",\r\n        title: '<span style=\"color: black;\">Login Successful</span>',\r\n        showConfirmButton: true,\r\n        iconColor: \"green\",\r\n        background: `#fff`,\r\n      });\r\n\r\n    } catch (error) {\r\n      setError(error.message);\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: '<span style=\"color: black;\">Login Failed</span>',\r\n        html: `<span style=\"color: red;\">${error.message}</span>`,\r\n        iconColor: \"red\",\r\n        background: `#fff`,\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    loginData,\r\n    loading,\r\n    error,\r\n    handleChange,\r\n    handleSubmit,\r\n  };\r\n}\r\n\r\nexport default useLogin;\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,IAAI,MAAM,aAAa;AAE9B,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAC;IACzCM,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE,EAAE;IACVC,UAAU,EAAE,EAAE;IACdC,MAAM,EAAE,EAAE;IACVC,MAAM,EAAE,EAAE;IACVC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,EAAE;IACTC,IAAI,EAAE,EAAE;IACRC,cAAc,EAAE,EAAE;IAClBC,MAAM,EAAE;EACV,CAAC,CAAC;EACF,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMoB,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAEf,IAAI;MAAEgB;IAAM,CAAC,GAAGD,CAAC,CAACE,MAAM;IAChClB,YAAY,CAAC;MACX,GAAGD,SAAS;MACZ,CAACE,IAAI,GAAGgB;IACV,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,YAAY,GAAG,MAAOH,CAAC,IAAK;IAChCA,CAAC,CAACI,cAAc,CAAC,CAAC;IAClBR,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,8CAA8C,EAAE;QAC3EC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC5B,SAAS;MAChC,CAAC,CAAC;MAEF,MAAM6B,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAElC,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACf,KAAK,IAAI,cAAc,CAAC;MAC/C;MAEAmB,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEP,IAAI,CAACC,SAAS,CAACC,IAAI,CAAC,CAAC;MAEtDhC,IAAI,CAACsC,IAAI,CAAC;QACRC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,qDAAqD;QAC5DC,iBAAiB,EAAE,IAAI;QACvBC,SAAS,EAAE,OAAO;QAClBC,UAAU,EAAE;MACd,CAAC,CAAC;IAEJ,CAAC,CAAC,OAAO1B,KAAK,EAAE;MACdC,QAAQ,CAACD,KAAK,CAAC2B,OAAO,CAAC;MACvB5C,IAAI,CAACsC,IAAI,CAAC;QACRC,IAAI,EAAE,OAAO;QACbC,KAAK,EAAE,iDAAiD;QACxDK,IAAI,EAAE,6BAA6B5B,KAAK,CAAC2B,OAAO,SAAS;QACzDF,SAAS,EAAE,KAAK;QAChBC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ,CAAC,SAAS;MACR3B,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,OAAO;IACLb,SAAS;IACTY,OAAO;IACPE,KAAK;IACLE,YAAY;IACZI;EACF,CAAC;AACH;AAACrB,EAAA,CA3EQD,QAAQ;AA6EjB,eAAeA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}